<% layout('./layouts/boilerplate.ejs')%>
<%- include('../../../layouts/partials/settings.ejs') %>
<div class="content fullscreen"  id="content-menu">
    <div class="flex justify-between">
    <ul class="flex border rounded-lg white-black mt-2 flex-wrap -mb-px text-sm font-medium text-center" id="myTab" data-tabs-toggle="#myTabContent" role="tablist">
        <li class="mr-2" role="presentation">
            <button class="inline-block p-4 rounded-t-lg focus:outline-none focus:border-blue-500 {{activeTab === 'IT' ? 'border-b-2 border-blue-500' : 'border-b-0'}} text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500" id="Content-tab" data-tabs-target="#Content" type="button" role="tab" aria-controls="Content" aria-selected="true"><i class="bi bi-train-freight-front"></i>Content
                </button>
        </li>
        <li class="mr-2" role="presentation">
            <button class="inline-block p-4 rounded-t-lg focus:outline-none focus:border-blue-500 {{activeTab === 'dashboard' ? 'border-b-2 border-blue-500' : 'border-b-0'}} dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300" id="Analytics-tab" data-tabs-target="#Analytics" type="button" role="tab" aria-controls="Analytics" aria-selected="false">Analytics</button>
        </li>
        <li class="mr-2" role="presentation">
            <button class="inline-block p-4 rounded-t-lg focus:outline-none focus:border-blue-500 {{activeTab === 'settings' ? 'border-b-2 border-blue-500' : 'border-b-0'}} dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300" id="Commets-tab" data-tabs-target="#Commets" type="button" role="tab" aria-controls="Commets" aria-selected="false">Commets</button>
        </li>
        <li role="presentation">
            <button class="inline-block p-4 rounded-t-lg focus:outline-none focus:border-blue-500 {{activeTab === 'contacts' ? 'border-b-2 border-blue-500' : 'border-b-0'}} dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300" id="Settings-tab" data-tabs-target="#Settings" type="button" role="tab" aria-controls="Settings" aria-selected="false">Settings</button>
        </li>
    </ul>
    <button class="border-none bg-cyan-600 w-26  p-4 text-center text-white rounded">Save</button>
</div>
<form action="/">
<div id="myTabContent">
    <div class="p-4 rounded-lg ap-ct" id="Content" role="tabpanel" aria-labelledby="Content-tab">
        <div class="flex grid gap-6 mb-3 md:grid-cols-2">

            <div class="video-content md:grid-cols-2 overflow-y-scroll" style="height: 35em;">
                <div>
                    <div class="flex justify-between ">
                        <span class="text-2xl font-medium">Details</span>
                        <button class="text-blue-500">Template</button>
                    </div>
                    <div class="mb-6 ">
                        <label for="large-input" class="block mb-2 text-sm font-medium text-gray-500 ">Title</label>
                        <input name="title" value="<%=upload.title %>" type="text" id="large-input" class="block w-full p-4 text-gray-900 border border-gray-300 rounded bg-gray-50 sm:text-md focus:ring-blue-500 focus:border-blue-500" required="">
                    </div>
                    <label for="message" class="block mb-2 text-sm font-medium text-gray-500 ">Description
                    </label>
                    <textarea  name="description" id="message" rows="4" class="block p-2.5 w-full text-sm text-gray-500 bg-gray-50 rounded border border-gray-300 focus:ring-blue-500 focus:border-blue-500 " placeholder="Write your thoughts here..."><%=upload.description %></textarea>
                </div>
                <br><br>

                <br>
                <div class="thumbnail">
                    <span>Thumbnail</span> <br>
                    <span class="text-sm text-gray-500">
                      Select or upload a picture that shows what's in your video. A good thumbnail stands out and draws viewers' attention. <a href="#" class="text-blue-500">Learn more</a>
                    </span>
                    <br>
                    <div>
                        <% if(upload.thumbnail){ %>
                      <img id="thumbnailPreview" class="w-full rounded" src="<%=upload.thumbnail %>" alt="Thumbnail Preview" >
                        <% } else{ %>
                            <img id="thumbnailPreview" class="w-full rounded" src="" alt="Thumbnail Preview" style="display: none;">

                            <% } %>
                    </div>
                    <div>
                      <label class="w-26 flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue">
                        <svg class="w-8 h-8" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                          <path d="M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"></path>
                        </svg>
                        <span class="mt-2 text-base leading-normal">Select a file</span>
                        <input name="thumbnail" type="file" id="thumbnailInput" class="hidden" accept="image/*">
                      </label>
                    </div>
                  </div>
                <br><br>
                <div class="visability">
                    <span class="text-2xl">Visibility</span><br>
                    <span class="text-sm">Choose when to publish and who can see your video
                    </span>
                    <div class="border rounded-md p-3">
                        <div class="flex">
                          <div class="flex items-center h-5">
                            <input id="helper-checkbox" aria-describedby="helper-checkbox-text" type="checkbox" value="" class="w-4 h-4 rounded-full text-blue-600 bg-gray-100 border-gray-300 rounded">
                          </div>
                          <div class="ml-2 text-sm">
                            <label for="helper-checkbox" class="font-medium text-gray-900">Save or publish</label>
                            <p id="helper-checkbox-text" class="text-xs font-normal text-gray-500">Make your video public, unlisted, or private</p>
                            <div class="flex flex-col p-2">
                              <div class="flex flex-col">
                                <div class="private flex">
                                  <input type="checkbox" name="visibility" value="private" class="rounded-md mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300" onclick="handleVisibilityChange('private')">
                                  <div class="flex ml-1 flex-col">
                                    <label for="helper-checkbox" class="font-medium text-gray-900">Private</label>
                                    <p id="helper-checkbox-text" class="text-xs font-normal text-gray-500">Only you and people chosen have access</p>
                                  </div>
                                </div>
                                <div class="unlisted flex">
                                  <input type="checkbox" name="visibility" value="unlisted" class="rounded-md mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300" onclick="handleVisibilityChange('unlisted')">
                                  <div class="flex ml-1 flex-col">
                                    <label for="helper-checkbox" class="font-medium text-gray-900">Unlisted</label>
                                    <p id="helper-checkbox-text" class="text-xs font-normal text-gray-500">Anyone with the video link can watch your video</p>
                                  </div>
                                </div>
                                <div class="public flex">
                                  <input type="checkbox" name="visibility" value="public" class="rounded-md mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300" onclick="handleVisibilityChange('public')">
                                  <div class="flex ml-1 flex-col">
                                    <label for="helper-checkbox" class="font-medium text-gray-900">Public</label>
                                    <p id="helper-checkbox-text" class="text-xs font-normal text-gray-500">Everyone has access</p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                </div>

                <br><br>
                <div class="flex justify-between">
                <div class="tags">
                    <span class="text-xl">Tags</span><br>
                    <span class="text-xs">
                        Tags can be useful if content in your video.
                    </span>
                    <br>
                    <div>
                        <div>
                            <input type="text" id="tag_input" class="block py-2.5 px-0 w-full text-sm  bg-transparent border-0 border-b-2 border-gray-300 appearance-none  dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer">
                            <label for="tag_input" class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Tags</label>
                        </div>
                        <br>
                        <input id="tags-post" class="hidden tags-post" type="text" value="" name="tags">
                      
                    </div>
                </div>
                <div class="category">
                    <div>

                        <label for="category" class="block text-sm font-medium">Categorie</label>
                        <br>
                        <select name="category" id="countries" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                            <option selected="" value="<%=upload.category %>"><%=upload.category %></option>
                            <option value="technology">Technology</option>
                            <option value="education">Education</option>
                            <option value="helth">Health and Fitness
                            </option>
                            <option value="sports">Sports</option>
                            <option value="food">Food and Cooking</option>
                            <option value="business">Business and Finance
                            </option>
                            <option value="art">Arts and Culture
                            </option>
                        </select>

                    </div>
                </div>
            </div>
            </div>
            <div class="flex justify-center flex-col text-center items-center">
                <div>
                    <div id="uploadContainer">
                        <video id="videoElement" class="rounded-sm w-full" height="350" controls>
                            <% if (upload.VideoUrl) { %>
                              <source class="rounded-lg w-full" src="<%= upload.VideoUrl %>" type="video/mp4">
                              <source class="rounded-lg h-full" src="<%= upload.VideoUrl %>" type="video/webm">
                              <source class="rounded-lg h-full" src="<%= upload.VideoUrl %>" type="video/ogg">
                              Your browser does not support the video tag.
                            <% } %>
                          </video>
                    </div>
                          <br>
                      <div id="videoContainer"></div>
                      
                      
                    <div class="bg-dark pb-3 text-left">
                        <textarea style="overflow: scroll;
                        flex-wrap: wrap;
                        height: auto;
                        border: none;
                        cursor: none;
                        padding-right: 0.6em;
                        max-height: 5em;    
                        resize: none;
                        width: 100%;" class="text-2xl font-medium flex flex-wrap" id="titlePreview"></textarea>
                      
<div style="    margin-left: -0.8em;" class="tags mb-3 flex flex-wrap" id="tags_container">

</div>
                    </div>
                </div>
              
            </div>

        </div>
    </div>
    <div class="p-2 rounded-lg ap-ct hidden" id="Analytics" role="tabpanel" aria-labelledby="Analytics-tab">
           <div class="grid grid-cols-3 gap-4 mb-4">
            <a href="#" class=" hover:bg-gray-50 views bg-white p-4 rounded-md border">
              <div class="flex">
                <div class="view flex bg-red-200  p-3 rounded-md">
                  <i class="bi text-red-600 bi-eye-fill"></i>
                </div>
                
                <div class="flex flex-col ml-3 w-full">
                  <div class="flex w-full justify-between">
                    <b><%= upload.viewcount %></b>
                   <span class="text-green-400"> <i class="bi  bi-graph-up"> 23% </i></span>
                  </div>

                  <span class="text-sm text-gray-500">Avg Clicks</span>
                </div>
              </div>
            

            </a>
            
            <a href="#" class=" hover:bg-gray-50 views bg-white p-4 rounded-md border">
              <div class="flex">
                <div class="view flex bg-green-200  p-2 rounded-md">
                  <i class="text-xl text-green-600 bi bi-hand-thumbs-up-fill"></i>
                </div>
                
                <div class="flex flex-col ml-3 w-full">
                  <div class="flex w-full justify-between">
                    <b><%= upload.likes.length%></b>
                   <span class="text-red-400"> <i class="bi  bi-graph-down"> 2% </i></span>
                  </div>

                  <span class="text-sm text-gray-500">Likes</span>
                </div>
              </div>
            

            </a>
            <a href="#" class=" hover:bg-gray-50 views bg-white p-4 rounded-md border">
              <div class="flex">
                <div class="view flex bg-blue-200  p-3 rounded-md">
                  <i class=" text-blue-600 bi bi-chat-left-text-fill"></i>
                </div>
                
                <div class="flex flex-col ml-3 w-full">
                  <div class="flex w-full justify-between">
                    <b><%= upload.comments.length%></b>
                   <span class="text-green-400"> <i class="bi  bi-graph-up"> 2% </i></span>
                  </div>

                  <span class="text-sm text-gray-500">Total Commets</span>
                </div>
              </div>
            

            </a>
           </div>
           <div class="container mx-auto" data-path="0.0">
            <div class="bg-white rounded" data-path="0.0.0">
              <div class="flex flex-wrap items-center  " data-path="0.0.0.0">
                <h3 class="w-full md:w-auto mb-4 md:mb-0 text-2xl font-bold" data-config-id="header" data-path="0.0.0.0.0">Daily Visitiors</h3>
                <div class="ml-auto inline-block py-2 px-3 border rounded text-xs text-gray-500" data-path="0.0.0.0.1">
                  <select class="pr-1" name="" id="" data-path="0.0.0.0.1.0">
                    <option value="1" data-config-id="option1-1" data-path="0.0.0.0.1.0.0">March</option>
                    <option value="1" data-config-id="option1-2" data-path="0.0.0.0.1.0.1">June</option>
                    <option value="1" data-config-id="option1-3" data-path="0.0.0.0.1.0.2">September</option>
                  </select>
                </div>
                <div class="ml-2 inline-block py-2 px-3 border rounded text-xs text-gray-500" data-path="0.0.0.0.2">
                  <select class="pr-1" name="" id="" data-path="0.0.0.0.2.0">
                    <option value="1" data-config-id="option2-1" data-path="0.0.0.0.2.0.0">Daily</option>
                    <option value="1" data-config-id="option2-2" data-path="0.0.0.0.2.0.1">Weekly</option>
                    <option value="1" data-config-id="option2-3" data-path="0.0.0.0.2.0.2">Monthly</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="container mx-auto my-8">
            <div class="flex items-center justify-between mb-4">
              <label class="cursor-pointer">
                <input type="checkbox" id="subscribersToggle" class="hidden">
                <span class="bg-blue-500 w-12 h-6 rounded-full inline-block"></span>
                <span class="ml-2 text-gray-700">Subscribers</span>
              </label>
              <label class="cursor-pointer">
                <input type="checkbox" id="likesToggle" class="hidden">
                <span class="bg-purple-500 w-12 h-6 rounded-full inline-block"></span>
                <span class="ml-2 text-gray-700">Likes</span>
              </label>
            </div>
            <canvas id="myChart"></canvas>
          </div>
    </div>
    <div class="p-4 rounded-lg ap-ct hidden" id="Commets" role="tabpanel" aria-labelledby="Commets-tab">
    

    </div>
    <div class="p-4 rounded-lg ap-ct hidden" id="Settings" role="tabpanel" aria-labelledby="Settings-tab">
        <p class="text-sm  ">This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Contacts tab's associated content</strong>.
            Clicking another tab will toggle the visibility of this one for the next. The tab JavaScript swaps
            classes to control the content visibility and styling.</p>
    </div>
</div>
</form>

</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
   // Sample data (replace with your own data)
   const subscribersData = [1, 3, 4, 5, 6,20];
    const likesData = [2, 3, 4, 5, 6];
    const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May'];

    // Create initial chart (subscribers)
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: 'Subscribers',
          data: subscribersData,
          borderColor: 'rgba(59, 130, 246, 1)',
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          tension: 0.4,
          borderWidth: 2,
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
          }
        }
      }
    });

    // Handle toggling between subscribers and likes graphs
    const subscribersToggle = document.getElementById('subscribersToggle');
    const likesToggle = document.getElementById('likesToggle');

    subscribersToggle.addEventListener('change', () => {
      if (subscribersToggle.checked) {
        myChart.data.datasets[0].data = subscribersData;
        myChart.data.datasets[0].label = 'Subscribers';
        myChart.data.datasets[0].borderColor = 'rgba(59, 130, 246, 1)';
        myChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.2)';
      }
      myChart.update();
    });

    likesToggle.addEventListener('change', () => {
      if (likesToggle.checked) {
        myChart.data.datasets[0].data = likesData;
        myChart.data.datasets[0].label = 'Likes';
        myChart.data.datasets[0].borderColor = 'rgba(156, 39, 176, 1)';
        myChart.data.datasets[0].backgroundColor = 'rgba(156, 39, 176, 0.2)';
      }
      myChart.update();
    });
   
</script>